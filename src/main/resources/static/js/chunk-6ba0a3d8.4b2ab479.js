(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ba0a3d8"],{"164b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navigation"),a("SearchAndlogobox"),a("OrderInfo")],1)},i=[],s=a("f4dd"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:" container d-flex justify-content-between"},[t._m(0),n("div",{staticClass:"col border",staticStyle:{"background-color":"white"}},[n("br"),n("div",{staticClass:"d-flex justify-content-between"},[n("el-tabs",{attrs:{type:"card"},on:{"tab-click":function(e){return t.switchover(t.activeName)}},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"全部订单",name:"allorder"}}),n("el-tab-pane",{attrs:{label:"待付款"+t.pendingpaymentcount,name:"pendingpayment"}}),n("el-tab-pane",{attrs:{label:"待收货"+t.Pendinggoodscount,name:"Pendinggoods"}}),n("el-tab-pane",{attrs:{label:"待评价"+t.Pendingevaluatecount,name:"Pendingevaluate"}}),n("el-tab-pane",{attrs:{label:"已完成",name:"accomplish"}})],1),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"350px"},attrs:{placeholder:"请输入内容"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[n("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[n("el-option",{attrs:{label:"订单号",value:"1"}}),n("el-option",{attrs:{label:"电话",value:"2"}})],1),n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),n("br"),n("table",{staticClass:"table col"},[n("tr",{staticStyle:{"font-size":"12px"}},[n("th",[t._v("订单详情")]),n("th",[t._v("金额")]),n("th",[t._v("收货人")]),n("th",[t._v("联系电话")]),n("th",[t._v(t._s("allorder"==t.activeName?"订单状态":"pendingpayment"==t.activeName?"等待付款":"Pendinggoods"==t.activeName?"等待收货":"Pendingevaluate"==t.activeName?"等待评价":"accomplish"==t.activeName?"是否完成交易":"订单状态"))]),n("th",[t._v("操作")])]),t._l(t.orderLists,(function(e,i){return[n("span",{key:e,staticClass:"mt-3",staticStyle:{"font-size":"12px",float:"left"}},[t._v(" 订单编号："+t._s(e.oredrnumber))]),n("tr",{key:e,staticClass:"border ordertr",staticStyle:{"font-size":"12px"}},[n("td",[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"d-flex"},[n("div",{staticClass:"border d-flex align-items-center justify-content-center",staticStyle:{width:"70px",height:"70px",cursor:"pointer"},on:{click:function(a){return t.commoditydetailed(e.commodityid)}}},[n("img",{attrs:{src:a("1771")("./"+e.commoditypicture),width:"60px"}})]),t._v("  "),n("div",{staticClass:"text-left",staticStyle:{width:"200px"}},[t._v(" "+t._s(e.commodityname)+" ")])]),n("div",{staticStyle:{float:"right"}},[t._v("X"+t._s(e.count))])])]),n("td",[n("span",[t._v("￥"+t._s(e.totalprice))])]),n("td",[t._v(t._s(e.username))]),n("td",[t._v(t._s(e.phone))]),n("td",[t._v(" "+t._s("allorder"==t.activeName?e.orderstate:"pendingpayment"==t.activeName?2==e.paymentstate?"等待商家确认":"未付款":"Pendinggoods"==t.activeName?"未收货":"Pendingevaluate"==t.activeName?"未评论":"accomplish"==t.activeName?e.orderstate:"订单状态")+" ")]),n("td",[n("div",{staticClass:"d-flex justify-content-center"},["allorder"==t.activeName||"accomplish"==t.activeName?[n("el-button",{staticStyle:{"font-size":"12px"}},[t._v("订单详情")])]:t._e(),"pendingpayment"==t.activeName&&""!=t.dialogVisible?[n("el-button",{attrs:{type:"text",disabled:2==e.paymentstate},on:{click:function(e){t.dialogVisible[i].dialogVisibleString=!0}}},[t._v("立即付款")]),n("el-dialog",{attrs:{title:"付款码",visible:t.dialogVisible[i].dialogVisibleString,width:"30%"},on:{"update:visible":function(e){return t.$set(t.dialogVisible[i],"dialogVisibleString",e)}}},[n("img",{staticClass:"col-8",attrs:{src:a("cc2a")}}),n("div",{staticClass:"d-flex justify-content-between"},[n("el-button",{attrs:{type:"danger",round:""},on:{click:function(e){t.dialogVisible[i].dialogVisibleString=!1}}},[t._v("取消支付")]),n("el-button",{attrs:{type:"danger",round:""},on:{click:function(a){return t.operate(t.activeName,e.id)}}},[t._v("完成支付")])],1)])]:t._e(),"Pendinggoods"==t.activeName?[n("el-button",{staticStyle:{"font-size":"12px"},on:{click:function(a){return t.operate(t.activeName,e.id)}}},[t._v("确认收货")])]:t._e(),"Pendingevaluate"==t.activeName&&""!=t.drawer?[n("el-button",{staticStyle:{"font-size":"12px"},on:{click:function(e){t.drawer[i].drawerString=!0}}},[t._v("立即评价")]),n("el-drawer",{attrs:{title:"给你的宝贝进行评论吧!",visible:t.drawer[i].drawerString,direction:"btt"},on:{"update:visible":function(e){return t.$set(t.drawer[i],"drawerString",e)}}},[n("div",{staticClass:"container"},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"200","show-word-limit":""},model:{value:t.textComment,callback:function(e){t.textComment=e},expression:"textComment"}})],1),n("div",{staticClass:" mt-2 mb-2 d-flex justify-content-around container"},[n("el-button",{attrs:{type:"danger",round:""},on:{click:function(e){t.drawer[i].drawerString=!1}}},[t._v("取消")]),n("el-button",{attrs:{type:"danger",round:""},on:{click:function(a){return t.addCommodityComment(e.commodityid,t.activeName,e.id)}}},[t._v("确认")])],1)])]:t._e(),n("div",{staticClass:"ml-2",staticStyle:{width:"10px"}},[n("i",{staticClass:"el-icon-delete",on:{click:function(a){return t.delorder(e.id)}}})])],2)])])]}))],2)])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-1"},[a("span",{staticStyle:{"font-size":"13px"}},[t._v("订单中心")])])}],l=a("b147"),c={name:"OrderInfo",data:function(){return{textComment:"",drawer:"",dialogVisible:"",activeName:"allorder",select:"1",input:"",user:[],orderLists:[],pendingpaymentcount:0,Pendinggoodscount:0,Pendingevaluatecount:0}},created:function(){var t=this;Object(l["Ajax"])("get","user/homePageUser",null,(function(e){t.user=e;var a="uid="+parseInt(e.id);Object(l["Ajax"])("post","orderList/getOrderListUid",a,(function(e){t.orderLists=e,t.titlecount(e)}))}))},methods:{switchover:function(t){var e=this,a="uid="+parseInt(this.user.id)+"&statetitle="+t;Object(l["Ajax"])("post","orderList/getOrderListUid",a,(function(a){if(e.orderLists=a,e.dialogVisible="",e.drawer="","pendingpayment"==t){e.pendingpaymentcount=0;for(var n=0;n<a.length;n++)1!=a[n].paymentstate&&e.pendingpaymentcount++;e.dialogVisible=[];for(var i=0;i<e.pendingpaymentcount;i++)e.dialogVisible.push({dialogVisibleString:!1})}if("Pendinggoods"==t){e.Pendinggoodscount=0;for(var s=0;s<a.length;s++)"未收货"==a[s].freightstatus&&1==a[s].paymentstate&&e.Pendinggoodscount++}if("Pendingevaluate"==t){e.Pendingevaluatecount=0;for(var o=0;o<a.length;o++)0==a[o].commentstatus&&"已收货"==a[o].freightstatus&&1==a[o].paymentstate&&e.Pendingevaluatecount++;e.drawer=[];for(var r=0;r<e.Pendingevaluatecount;r++)e.drawer.push({drawerString:!1})}"allorder"==t&&e.titlecount(a)}))},delorder:function(t){var e=this;this.$confirm("此操作将永久删除订单, 是否继续",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a="id="+parseInt(t);Object(l["Ajax"])("post","orderList/delOredrListid",a,(function(t){1==t.success?(e.$message({type:"success",message:t.message}),e.switchover(e.activeName)):e.$message({type:"success",message:t.message})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},commoditydetailed:function(t){this.$router.push({name:"CommoditydetailedPage",params:{id:t}})},addCommodityComment:function(t,e,a){var n=this;alert(t);var i="commentmessage="+this.textComment+"&userid="+this.user.id+"&commodityid="+t;Object(l["Ajax"])("post","commoditycomment/addCommodityComment",i,(function(t){1==t.success?(n.textComment="",n.operate(e,a)):alert(t.message)}))},operate:function(t,e){var a=this,n="id="+parseInt(e)+"&statetitle="+t;Object(l["Ajax"])("post","orderList/updateOrderList",n,(function(e){1==e.succes?"pendingpayment"==t&&alert(e.message):alert(e.message),a.switchover(t);var n="uid="+parseInt(a.user.id)+"&statetitle=allorder";Object(l["Ajax"])("post","orderList/getOrderListUid",n,(function(t){a.titlecount(t)}))}))},titlecount:function(t){this.pendingpaymentcount=0,this.Pendinggoodscount=0,this.Pendingevaluatecount=0;for(var e=0;e<t.length;e++)1!=t[e].paymentstate&&this.pendingpaymentcount++,"未收货"==t[e].freightstatus&&1==t[e].paymentstate&&this.Pendinggoodscount++,0==t[e].commentstatus&&"已收货"==t[e].freightstatus&&1==t[e].paymentstate&&this.Pendingevaluatecount++}}},d=c,u=(a("3e3f"),a("2877")),m=Object(u["a"])(d,o,r,!1,null,null,null),p=m.exports,g=a("938f"),v={name:"OrderPage",components:{Navigation:s["a"],OrderInfo:p,SearchAndlogobox:g["a"]},data:function(){return{activeName:"allorder",select:"1",input:""}}},f=v,b=Object(u["a"])(f,n,i,!1,null,null,null);e["default"]=b.exports},"3e3f":function(t,e,a){"use strict";a("613f")},"613f":function(t,e,a){},"938f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"background-color":"white"}},[a("form",{staticClass:"d-flex justify-content-around formtitle",staticStyle:{"padding-top":"8px","padding-bottom":"8px"}},[t._m(0),a("div",{staticClass:" d-flex align-items-center"},[a("el-input",{attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search"}}),a("button",{staticClass:"btn btn-secondary ml-1",staticStyle:{width:"50px","font-size":"12px"},attrs:{id:"likebtn",type:"button"}},[t._v("搜索")])],1)])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:" d-flex align-items-end ",attrs:{id:"logimg"}},[n("img",{staticStyle:{width:"50px"},attrs:{src:a("ede7")}})])}],s={name:"SearchAndlogobox"},o=s,r=a("2877"),l=Object(r["a"])(o,n,i,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-6ba0a3d8.4b2ab479.js.map